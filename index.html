<!DOCTYPE html>
<html>
<head>
    <title>IPTV HLS Player</title>
    <meta name="viewport" content="width=device-width">
    <!-- HLS.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@1"></script>
    <style>
        body { 
            margin: 0; padding: 10px; 
            background: #1a1a1a; color: white; 
            font-family: sans-serif; height: 100vh; 
            overflow: hidden;
        }
        #player { 
            width: 100%; height: 70vh; 
            background: #000; border-radius: 10px;
        }
        #playlist {
            padding: 10px; max-height: 25vh; 
            overflow-y: auto; background: #2d2d2d;
        }
        .channel {
            padding: 12px; margin: 5px 0; 
            background: rgba(255,255,255,0.1); 
            border-radius: 8px; cursor: pointer;
        }
        .channel:hover { background: rgba(255,255,255,0.2); }
        .channel.active { background: #ff6b6b; }
        h2 { margin: 10px 0; color: #4fd1c7; }
        #status { padding: 10px; font-size: 14px; color: #90caf9; }
    </style>
</head>
<body>
    <video id="player" controls playsinline muted></video>
    <div id="status">Ready to play HLS streams </div>
    <div id="playlist">
        <h2> Live Channels</h2>
    </div>

    <script>
        const player = document.getElementById('player');
        const playlistDiv = document.getElementById('playlist');
        const statusDiv = document.getElementById('status');
        let hls = null;

        //  M3U8 streams  
        const channels = [
    // 1. Big Buck Bunny (HD Movie - Perfect Test)
    { name: 'Big Buck Bunny ', url: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4' },
    
    // 2. Tears of Steel (Sci-Fi Short Film)
    { name: 'Tears of Steel ', url: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/TearsOfSteel.mp4' },
    
    // 3. HLS Test Stream (Live-like)
    { name: 'HLS Test Stream ', url: 'https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8' },
    
    // 4. Apple HLS Sample
    { name: 'Apple Sample ', url: 'https://devstreaming-cdn.apple.com/videos/streaming/examples/img_bipbop_adv_example_ts/master.m3u8' },
    
    // 5. NASA Live (Space stream)
    { name: 'NASA Space ', url: 'https://public-api.nrk.no/live-tv/channels/nrk1/tv/manifest.m3u8' }
];


        // Channels list 
        channels.forEach((channel, index) => {
            const div = document.createElement('div');
            div.className = 'channel';
            div.innerHTML = ` ${channel.name}`;
            div.onclick = () => playChannel(channel.url, div);
            playlistDiv.appendChild(div);
        });

        function playChannel(url, element) {
            // Active highlight
            document.querySelectorAll('.channel').forEach(el => el.classList.remove('active'));
            element.classList.add('active');
            
            statusDiv.textContent = 'Loading... ' + url;
            
            if (Hls.isSupported()) {
                // HLS.js 
                if (hls) hls.destroy();
                hls = new Hls({
                    enableWorker: true,
                    lowLatencyMode: true,
                    backBufferLength: 90
                });
                
                hls.loadSource(url);
                hls.attachMedia(player);
                hls.on(Hls.Events.MANIFEST_PARSED, () => {
                    player.play();
                    statusDiv.textContent = ' Playing: ' + element.textContent;
                });
            } else if (player.canPlayType('application/vnd.apple.mpegurl')) {
                // Safari native HLS
                player.src = url;
                player.play();
            }
        }

        // Error handling
        player.addEventListener('error', () => {
            statusDiv.textContent = ' Stream error - Check URL';
        });
    </script>
</body>
</html>
